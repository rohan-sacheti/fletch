(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{I4Wp:function(e,t,n){},IuzP:function(e,t,n){},JhcM:function(e,t,n){},KA4J:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var a=n("efbE"),c=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"],r=function localeToGiphyLang(e){switch(e){case"de-DE-formal":return"de";case"zh":return"zh-CN";case"zh-HK":return"zh-TW";case"pt-BR":return"pt"}return c.includes(e)?e:"en"},i=function getTrendingGiphys(e){return a.h.get("/trending",{params:{limit:e,rating:"pg"}})},o=function getSearchGiphys(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).locale;return a.h.get("/search",{params:{limit:t,q:e,lang:r(n),rating:"pg"}})}},"PGb/":function(e,t,n){},UXBQ:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return r});var a=n("efbE"),c=function uploadAttachment(e,t){var n=new FormData;return n.append("conversationId",t),n.append("file",e),a.a.post("/attachments",n)},r=function fetchAttachments(e,t){return a.a.get("/attachments",{params:{id:e},cancelToken:t})}},dZmz:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("efbE"),c=n("rAc1"),r=n("l6A5"),i=function urlIdentity(e){return Object(c.a)(e)},o=(Object(r.a)(i,function(e){return a.k.get("/",{params:{url:encodeURI(e)}})}),Object(r.a)(i,function(e){return a.j.get("/",{params:{url:e,iframe:1,omit_script:1,media:1}})}))},fTFZ:function(e,t,n){"use strict";var a=n("nfbA"),c=n("WwEg"),r=n("s8DI"),i=n("nJ3u"),o=n("O94r"),s=n.n(o),u=n("7IKl"),l=n("lE29"),d=n("ERkP"),m=n.n(d),f=n("Tr4L"),b=n("uDfI"),g=(n("I4Wp"),function AgentTypingIndicator(){var e=Object(f.a)().t,t=Object(l.a)().widgetBackgroundAlpha,n=Object(b.c)(function(e){return e.conversations.typingIndicators[e.conversations.activeConversation]||{}}),a=n.isTyping,c=void 0!==a&&a,r=n.userId,i=Object(u.a)(r);return c?m.a.createElement("p",{style:t,className:"agent-typing-indicator"},e("status.agentTyping",{agent:i})):null}),p=n("ZGTz"),v=n("oImb"),O=n("+Kbs"),j=n("908p"),h=n("nQD+"),E=n("HXmn"),y=n("sPXl"),w=n("mZ4K"),A=n("P+wr"),I=n("vLHT"),k=n("6wvX"),T=n("z24s"),C=n("jITz"),N=n("6rzO"),L=n("58kB"),S=n("uQkC"),B=n("Hvhg"),U=n("+oIK"),M=n("LVcX"),z=n("U505"),R=n("ovDp"),_=n("vwUF"),x=n("0lfv");n("IuzP");n.d(t,"a",function(){return F});var F,P="GIF",D="TEXT",V=function validateMessageText(e){return!Object(x.m)(e)&&e.trim().length>0};!function(e){e[e.AVAILABLE=0]="AVAILABLE",e[e.AVAILABLE_BUTTONS=1]="AVAILABLE_BUTTONS",e[e.UNAVAILABLE=2]="UNAVAILABLE",e[e.UNAVAILABLE_BUTTONS=3]="UNAVAILABLE_BUTTONS"}(F||(F={}));t.b=function Composer(e){var t=e.onSubmit,n=e.activeConversationId,o=e.disabled,u=void 0!==o&&o,H=e.chatHidden,G=e.alwaysShowSendAction,K=void 0!==G&&G,Z=e.useGifPicker,J=void 0===Z||Z,W=e.alwaysShow,X=void 0!==W&&W,q=Object(d.useRef)(null),Q=Object(d.useRef)(null),Y=Object(d.useRef)(null),$=Object(d.useRef)(null),ee=Object(I.a)(),te=Object(d.useState)(""),ne=Object(r.a)(te,2),ae=ne[0],ce=ne[1],re=Object(d.useState)(!1),ie=Object(r.a)(re,2),oe=ie[0],se=ie[1],ue=Object(d.useState)(!1),le=Object(r.a)(ue,2),de=le[0],me=le[1],fe=Object(d.useState)(!1),be=Object(r.a)(fe,2),ge=be[0],pe=be[1],ve=Object(d.useState)([]),Oe=Object(r.a)(ve,2),je=Oe[0],he=Oe[1],Ee=Object(y.a)(q),ye=Object(T.a)(q),we=Object(T.a)(Q),Ae=Object(T.a)(Y),Ie=Object(T.a)($),ke=Object(b.c)(function(e){return e.view}),Te=ke.matchedHours,Ce=ke.chatOpen,Ne=Object(b.c)(function(e){return e.conversations.attachments}),Le=Object(b.c)(function(e){return e.session.endUser.id}),Se=Object(b.c)(function(e){return Object(M.a)(!1,["embed","configuration","theme"],e)}).allowEndUserFileUpload,Be=Object(b.c)(B.g),Ue=J&&Be,Me=Object(f.a)().t,ze=Object(k.a)(!0),Re=Object(w.a)(),_e=Object(l.a)(),xe=_e.activeColor,Fe=_e.widgetBackgroundColor,Pe=_e.composerTheme,De=_e.composerButtonHoverColor,Ve=_e.composerButtonIconColor,He=Object(L.a)(Re).recipient,Ge=Object(N.a)({inputRef:q}),Ke=Ge.pastedFiles,Ze=Ge.clearFiles,Je=Object(C.a)({ref:q,targetKey:"Enter"}),We=Object(S.a)({activeConversationId:n}),Xe=We.sendTypingStarted,qe=We.sendTypingFinished,Qe=Object(A.a)({activeConversation:n,onAttachmentUploadComplete:Object(d.useCallback)(function onAttachmentUploadComplete(e){he(function(t){return[].concat(Object(c.a)(t),Object(c.a)(e))}),Ze()},[])}),Ye=Qe.attachmentState,$e=Qe.uploadAttachments,et=Qe.resetAttachmentState,tt=ee===F.AVAILABLE||ee===F.AVAILABLE_BUTTONS,nt=Object(d.useMemo)(function(){return!X&&(u||!tt)},[X,u,tt]),at=Object(R.a)({onDrop:$e,disabled:u||!tt||!Se}),ct=at.getRootProps,rt=at.getInputProps,it=at.open,ot=V(ae)||!Object(x.m)(je),st=Ye===_.b.PENDING,ut=Ye===_.b.ERROR||Ye===_.b.SIZE_ERROR,lt=u||!tt||!!Ke.length;var dt=Object(d.useCallback)(function(e){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D,r=je?{attachments:je}:{},i=n?{}:{sentWelcomeMessage:Te};qe();var o=c===D?Object(x.r)(e):e;t({message:Object(U.a)(Object(a.a)({message:o,activeConversation:n||null,authorId:Le,attributes:i},r))}),ce(""),he([]),et()},[n,Le,Te,t,et,qe,je]);Object(d.useEffect)(function(){Se?Ke.length&&!st&&$e(Ke):Ze()},[Se,st,Ze,Ke,$e]),Object(d.useEffect)(function(){Ee&&Je&&(V(ae)||je.length)&&dt(ae,D)},[Ee,ae,Je,dt,je.length]),Object(d.useEffect)(function(){n&&ce("")},[n]),Object(d.useEffect)(function(){var e=q,t=ee===F.AVAILABLE_BUTTONS;return Ce&&tt&&!t&&!H&&e.current&&e.current.focus(),function(){return e.current&&e.current.blur()}},[H,Ce,tt,ee]);var mt=Object(d.useMemo)(function(){return tt?Me("composer.replyToPlaceholder",{name:He.name}):Me(ee===F.UNAVAILABLE_BUTTONS?"composer.chooseOptionAbove":"composer.replyDisabled")},[tt,He.name,ee,Me]),ft=Se&&!!n,bt=Ue&&!ot&&!!n,gt=K||!Ue||ot,pt=ft||gt||bt,vt=u||!ot||st;return m.a.createElement(m.a.Fragment,null,(je.length||st||ut)&&m.a.createElement("div",{className:"drift-widget-composer--pre-message-attachments"},ut&&m.a.createElement("div",{className:"drift-widget-attachment-send-status drift-widget-attachment-send-status--failed"},m.a.createElement("span",{className:"drift-widget-attachment-send-status--text"},Me(Ye===_.b.SIZE_ERROR?"attachment.errorSize":"attachment.error")),m.a.createElement(h.a,{onClick:function onClick(){et(),Ze()},className:"drift-widget-attachment-send-status--close",disabled:u},m.a.createElement(O.j,{width:10,height:10}))),(je.length||st)&&m.a.createElement("ul",{className:"drift-widget-composer-attachment-preview-list"},[].concat(Object(c.a)(je),Object(c.a)(st?[{pending:!0}]:[])).map(function(e,t){return m.a.createElement("li",{key:Ne[e]?Ne[e].id:"file-upload-loader"},Ne[e]&&!Ne.pending&&m.a.createElement(h.a,{"aria-label":"Remove attachment ".concat(t+1),onClick:function onClick(){return function onRemoveUploadedAttachment(e){he(function(t){return Object(z.a)([e],t)})}(e)},disabled:u},m.a.createElement(O.j,{width:6,height:6})),Ne[e]&&!Ne.pending?function resolveAttachmentTypeComponent(e){return e?e.mimeType.includes("image")?m.a.createElement("div",{className:"drift-widget-composer-attachment-preview-list-image-wrapper"},m.a.createElement("img",{alt:e.fileName,src:e.publicUrl})):m.a.createElement("div",{className:"drift-widget-composer-attachment-non-image",title:e.filename},m.a.createElement("strong",null,e.fileName),m.a.createElement(O.k,{width:16,height:16})):null}(Ne[e]):m.a.createElement(E.a,{size:"small",className:"drift-widget-composer-attachment-loader"}))}))),m.a.createElement("style",null,"\n          .drift-widget-input.keyboard-focused {\n            ".concat(Object(i.d)(Fe,xe),"\n          }\n\n          .drift-widget-composer-emoji-toggle.keyboard-focused:before {\n            ").concat(Object(i.a)(xe,24,-2,2),"\n          }\n\n          .drift-widget-composer-actions button.keyboard-focused,\n          .drift-widget-composer-actions button:focus,\n          .drift-widget-composer-send-button.keyboard-focused,\n          .drift-widget-composer--pre-message-attachments button:focus {\n            ").concat(Object(i.c)(xe),"\n          }\n        ")),m.a.createElement("div",Object.assign({},ct({onClick:function onClick(e){return e.stopPropagation()}}),{className:s()("drift-widget-composer--default",{"drift-widget-composer--mobile":ze,"drift-widget-composer--hidden":nt}),tabIndex:-1}),Se&&m.a.createElement("input",rt()),m.a.createElement(g,null),m.a.createElement("div",{className:"drift-widget-composer--text-area"},m.a.createElement("pre",null,tt&&ae.length?ae:" "),m.a.createElement("label",{className:"drift-a11y-visually-hidden",htmlFor:"drift-widget-composer-input"},mt),m.a.createElement("textarea",{className:s()("drift-widget-input",{"keyboard-focused":ye}),ref:q,placeholder:mt,value:tt?ae:"",onChange:function onTextareaChange(e){Je||Ke.length||(ce(e.target.value),Xe())},"aria-label":"message composer",maxLength:4096,disabled:lt,tabIndex:0,id:"drift-widget-composer-input",style:Pe}),tt&&!ze&&m.a.createElement("button",{ref:Q,className:s()("drift-widget-composer-emoji-toggle",{"keyboard-focused":we}),onClick:function onEmojiButtonClick(){lt||se(!oe)},disabled:u,"aria-expanded":oe,"aria-label":"emojis",onFocus:function onFocus(){return me(!0)},onMouseOver:function onMouseOver(){return me(!0)},onMouseLeave:function onMouseLeave(){return me(!1)}},m.a.createElement(O.l,{fill:de?De:Ve}))),tt&&!ze&&m.a.createElement(p.a,{open:oe,onAddEmoji:function onAddEmoji(e){se(!oe),tt&&!u&&(ce(e),q.current&&q.current.focus())},onClickOutside:function onEmojiPickerClickOutside(e){Q.current&&Q.current.contains(e.target)||se(!1)}}),tt&&pt&&m.a.createElement("div",{className:s()("drift-widget-composer-actions",{"drift-widget-composer-actions-expanded":ft&&(bt||gt)})},ft&&m.a.createElement("button",{ref:Y,className:s()({"keyboard-focused":Ae}),onClick:it,"aria-label":"add an attachment",disabled:u,onFocus:function onFocus(){return pe(!0)},onMouseOver:function onMouseOver(){return pe(!0)},onMouseLeave:function onMouseLeave(){return pe(!1)}},m.a.createElement(O.a,{fill:ge?De:Ve})),bt&&m.a.createElement(v.a,{onAddGiphy:function onAddGiphy(e){return dt(e,P)},disabled:u}),gt&&m.a.createElement("button",{className:s()("drift-widget-composer-send-button",{"drift-widget-composer-send-button--disabled":vt,"keyboard-focused":Ie}),"aria-label":"send message",onClick:function onClick(){return dt(ae,D)},disabled:vt||st,ref:$},m.a.createElement(j.a,{color:"#".concat(xe)})))))}},jKoD:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("efbE"),c=function recordConsent(e,t){return a.e.post("/end_users/".concat(e,"/consent"),{consentId:"has_consent",message:t})}},pgTp:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return l});var a=n("WwEg"),c=n("efbE"),r=n("JBtm"),i=n.n(r),o=function fetchAgentAvailability(e){var t=e.agentId,n=e.additionalAgents,r=void 0===n?[]:n,o=e.meetingType,s=e.start,u=e.orgMeetingType;return c.m.get("scheduling/".concat(t,"/availability"),{params:{meetingType:o,start:s,additionalAgents:Object(a.a)(r),orgMeetingType:u},paramsSerializer:function paramsSerializer(e){return i.a.stringify(e)}})},s=function fetchCompanyAvailability(e){var t=e.orgMeetingType,n=e.agentIds,a=void 0===n?[]:n;return c.m.get("/scheduling/availability/combined/v2",{params:{orgMeetingType:t,agentIds:a},paramsSerializer:function paramsSerializer(e){return i.a.stringify(e)}})},u=function scheduleMeeting(e){var t=e.endUserTimeZone,n=e.availabilitySlot,a=e.agentId,r=e.meetingType,i=e.meetingSource,o=e.conversationId,s=e.bookedByUserId,u=e.orgMeetingType;return c.m.post("scheduling/".concat(a,"/schedule"),n,{params:{conversationId:o,meetingSource:i,meetingType:r,timeZone:t,bookedByUserId:s,orgMeetingType:u}})},l=function scheduleCompanyMeeting(e){var t=e.availabilitySlot,n=e.availableAgents,a=e.conversationId,r=e.meetingSource,i=e.meetingType,o=e.endUserTimeZone,s=e.bookedByUserId,u=e.orgMeetingType;return c.m.post("/scheduling/schedule/combined",{availabilitySlot:t,availableAgents:n,conversationId:a,meetingSource:r,meetingType:i,endUserTimezone:o,bookedByUserId:s,orgMeetingType:u})}},"tGI+":function(e,t,n){"use strict";var a=n("mj2O"),c=n.n(a),r=n("7SM1"),i=n("s8DI"),o=n("NJA7"),s=n("fw6E"),u=n("K7i0"),l=n("+oIK"),d=n("da4L"),m=n("+f1A"),f=n("ERkP"),b=n.n(f),g=n("uDfI"),p=n("0lfv");n("yAze");t.a=function AgentRequestedOptions(e){var t=e.message,n=t.attributes,a=t.id,v=t.conversationId,O=Object(g.b)(),j=Object(g.c)(function(e){return e.session}).endUser,h=Object(s.a)().conversationHistoryOpen,E=Object(g.c)(function(e){return e.view}).chatOpen,y=Object(f.useState)(!E),w=Object(i.a)(y,2),A=w[0],I=w[1],k=Object(d.k)(t)&&E,T=Object(g.c)(m.d),C=function doSendMessage(e){var n=e.label;return function(){var e=Object(l.a)({message:n,activeConversation:v,authorId:j.id,attributes:{buttonClicked:!0,questionId:t.attributes.questionId,instanceId:T}});O(Object(u.m)({message:e}))}};Object(f.useLayoutEffect)(function(){function _delayButtons(){return(_delayButtons=Object(r.a)(c.a.mark(function _callee(){return c.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(!E||A){e.next=4;break}return e.next=3,Object(p.q)(500);case 3:I(!0);case 4:case"end":return e.stop()}},_callee)}))).apply(this,arguments)}!function delayButtons(){return _delayButtons.apply(this,arguments)}()},[A,E]);var N=A?"visible":"hidden";return b.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--END_USER drift-bot-buttons--set drift-bot-buttons--".concat(N)},n.buttons.map(function(e,t){return b.a.createElement("li",{className:"drift-widget-button--list-item","aria-posinset":t,key:"bot-button-".concat(a,"-").concat(t)},b.a.createElement(o.a,{onClick:C(e),invertOnHover:!0,forceFocus:0===t&&k,disabled:h,"aria-label":"".concat(e.label," - Click to reply with this message")},e.label))}))}},vkRn:function(e,t,n){"use strict";var a=n("nJ3u"),c=n("O94r"),r=n.n(c),i=n("noex"),o=n("yEsl"),s=n("fw6E"),u=n("z24s"),l=n("hhdZ"),d=n("58kB"),m=n("6fy/"),f=n("SsZN"),b=n("Wjfv"),g=n("K7i0"),p=n("da4L"),v=n("LVcX"),O=n("i9gz"),j=n("ERkP"),h=n.n(j),E=n("Tr4L"),y=n("uDfI"),w=n("A5mO"),A=(n("JhcM"),function ConversationHistoryListItem(e){var t=e.conversation,n=void 0===t?{}:t,a=Object(s.a)().onToggleConversationHistory,c=Object(j.useRef)(null),A=Object(E.a)().t,I=Object(u.a)(c),k=Object(y.b)(),T=Object(m.a)(),C=Object(j.useMemo)(function(){return Object(v.a)(null,["conversation","id"],n)},[n]),N=Object(l.a)(C),L=Object(j.useMemo)(function(){return Object(v.a)(null,["authorId"],N)},[N]),S=Object(d.a)(L).recipient,B=Object(p.h)(N);if(Object(O.a)(N))return null;var U=N.createdAt,M=N.attributes,z=void 0===M?{}:M,R=Object(w.a)(U).isAfter(w.a.today())?Object(w.a)(U).unixFmt(A("dt.format.time.short")):Object(w.a)(U).unixFmt(A("dt.format.date.short")),_=B?T.name:S.name,x="Conversation with ".concat(S.name).concat(z.preview?" - ".concat(B?"You":"",': "').concat(z.preview,'"'):"",", ").concat(R," - Click to open");return h.a.createElement("li",{className:r()("drift-widget-conversation-list-item",{"keyboard-focused":I})},h.a.createElement("button",{onClick:function toggleConversation(e){return function(){e&&(a(!1),k(Object(b.a)()),k(Object(g.n)({conversationId:e})),Object(f.f)(e))}}(n.conversation.id),"aria-label":x,ref:c},B?h.a.createElement(o.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:T.avatar}):h.a.createElement(i.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:S.avatarUrl,id:L}),h.a.createElement("div",{className:"drift-widget-conversation-list-item-content"},h.a.createElement("h2",null,_),h.a.createElement("span",{className:"drift-widget-conversation-list-item-time"},R),h.a.createElement("p",{className:"drift-widget-conversation-list-item-last-message"},z.preview))))}),I=n("lE29"),k=n("DboL"),T=n("9xv8");n("PGb/"),t.a=function ConversationHistory(){var e=Object(s.a)().conversationHistoryOpen,t=Object(y.c)(function(e){return e.conversations.conversations}),n=Object(j.useMemo)(function(){return Object(T.c)(Object(k.a)(t),"updatedAt")},[t]),c=Object(j.useMemo)(function(){return h.a.createElement("ul",{className:"drift-widget-conversation-history-list"},n.map(function(e){return h.a.createElement(A,{key:e.conversation.id,conversation:e})}))},[n]),i=Object(I.a)().activeColor;return h.a.createElement("div",{className:r()("drift-widget-conversation-history",{"drift-widget-conversation-history--open":e}),"aria-hidden":!e},h.a.createElement("style",null,"\n          .drift-widget-conversation-list-item.keyboard-focused {\n            ".concat(Object(a.c)(i),"\n          }\n        ")),e&&c)}},yAze:function(e,t,n){}}]);